<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Examen Flashcard</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg-color:#fff;--text-color:#000;--border-color:#e0e0e0;--button-bg:#f5f5f5;--button-hover:#e0e0e0;--accent-color:#333;--ok:#4caf50;--bad:#f44336}
        [data-theme="dark"]{--bg-color:#1a1a1a;--text-color:#e0e0e0;--border-color:#333;--button-bg:#2a2a2a;--button-hover:#3a3a3a;--accent-color:#ccc}
        body{font-family:'Georgia','Times New Roman',serif;background:var(--bg-color);color:var(--text-color);transition:all .3s ease;overflow:hidden;height:100vh;text-align:justify;text-justify:inter-word}
        .container{height:100vh;display:flex;flex-direction:column;position:relative}
        .header{position:absolute;top:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background:transparent}
        .progress{font-size:12px;color:var(--text-color);opacity:.6}
        .controls{display:flex;gap:10px}
        .control-btn{background:var(--button-bg);border:1px solid var(--border-color);color:var(--text-color);width:30px;height:30px;border-radius:4px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .2s ease}
        .control-btn:hover{background:var(--button-hover)}
        .flashcard-container{flex:1;display:flex;align-items:center;justify-content:center;padding:0;position:relative}
        .flashcard{width:100vw;height:100vh;background:var(--bg-color);border:none;border-radius:0;box-shadow:none;display:flex;flex-direction:column;cursor:pointer;position:relative}
        .flashcard-content{flex:1;display:flex;align-items:center;justify-content:center;padding:80px 28px 40px;line-height:1.6}
        .text-block{width:100%;max-width:1000px}
        .text-block p{margin-bottom:10px}
        .answer-buttons{display:none;padding:16px 20px;border-top:1px solid transparent;justify-content:center;gap:20px}
        .answer-buttons.show{display:flex}
        .answer-btn{padding:12px 24px;border:1px solid var(--border-color);background:var(--button-bg);color:var(--text-color);border-radius:4px;cursor:pointer;font-size:16px;transition:all .2s ease}
        .answer-btn:hover{background:var(--button-hover)}
        .correct{background:#e8f5e8;border-color:var(--ok)}
        .incorrect{background:#ffeaea;border-color:var(--bad)}
        [data-theme="dark"] .correct{background:#1b2f1b;border-color:var(--ok)}
        [data-theme="dark"] .incorrect{background:#2f1b1b;border-color:var(--bad)}
        .status-badge{position:absolute;top:48px;right:16px;z-index:101;font-weight:bold;font-size:14px;opacity:.9;padding:6px 10px;border-radius:999px;border:1px solid currentColor;pointer-events:none;display:none}
        .status-badge.ok{color:var(--ok);display:inline-block}
        .status-badge.bad{color:var(--bad);display:inline-block}
        .card-indicator{position:absolute;bottom:10px;right:15px;font-size:10px;opacity:.4}
        .swipe-hint{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);font-size:10px;opacity:.4;text-align:center}
        .results-screen{display:none;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center;padding:40px}
        .score{font-size:48px;font-weight:bold;margin:20px 0;color:var(--accent-color)}
        .restart-btn{padding:15px 30px;background:var(--button-bg);border:1px solid var(--border-color);color:var(--text-color);border-radius:4px;cursor:pointer;font-size:16px;margin:20px;transition:all .2s ease}
        .restart-btn:hover{background:var(--button-hover)}
        @media (max-width:768px){.flashcard-content{font-size:20px;padding:80px 16px 28px}.header{padding:10px 15px}}
    </style>
</head>
<body>
    <!-- üì¶ Datos embebidos (reemplaza este JSON con tus tarjetas) -->
    <script type="application/json" id="flashcardData">
[
  {
    "question": "Seg√∫n el texto, ¬øcu√°ndo es m√°s probable que un comportamiento sea interpretado como ‚Äúanormal‚Äù? A. Cuando no coincide con la moral dominante. B. Cuando se aparta de varios criterios o principios a la vez. C. Cuando es poco frecuente, sin importar su impacto. D. Cuando genera desacuerdo entre expertos.",
    "answer": "B. Es m√°s probable considerar ‚Äúanormal‚Äù un comportamiento cuando se aparta de varios criterios simult√°neamente, no por un solo desacuerdo o rareza aislada."
  },
  {
    "question": "La principal limitaci√≥n del enfoque estad√≠stico es que: A. Confunde lo frecuente con lo saludable o adaptativo. B. Niega la existencia de distribuciones normales. C. Depende del juicio moral para definir rangos. D. Ignora cualquier referencia a poblaci√≥n.",
    "answer": "A. Lo m√°s frecuente no siempre es lo saludable ni adaptativo, por lo que la ‚Äúnormalidad estad√≠stica‚Äù puede alejarse de lo ideal o funcional."
  },
  {
    "question": "¬øQu√© riesgo subraya el enfoque social o normativo? A. Universaliza valores filos√≥ficos. B. Tiende al relativismo y puede marginar a quienes no se ajustan a la norma hegem√≥nica. C. Sobrecorrige por diversidad individual. D. Desestima la historia de las normas.",
    "answer": "B. Se destaca el relativismo y la posibilidad de marginaci√≥n por √©nfasis en la conformidad con normas cambiantes y contextuales."
  },
  {
    "question": "En el enfoque cultural o antropol√≥gico, ¬øcu√°l afirmaci√≥n es coherente con el texto? A. La cultura fija una vez y para siempre lo normal. B. La normalidad depende de lo legalmente permitido. C. La normalidad var√≠a entre culturas y la cultura misma es fluida y cambiante. D. Solo lo biol√≥gico determina lo normal.",
    "answer": "C. Lo normal/anormal es cultural y la cultura es fluida, pudiendo variar incluso dentro de una misma cultura por interacciones y asimilaci√≥n."
  },
  {
    "question": "La premisa central del enfoque evolutivo/adaptativo es que lo normal: A. Coincide con el promedio poblacional. B. Se define por la eficacia para afrontar cambios del entorno y var√≠a seg√∫n la etapa del desarrollo. C. Es lo moralmente ideal. D. Depende del autorreporte de satisfacci√≥n vital.",
    "answer": "B. Lo normal es lo que permite afrontar eficazmente cambios y se comprende de modo din√°mico seg√∫n el desarrollo."
  },
  {
    "question": "¬øCu√°l es la limitaci√≥n espec√≠fica se√±alada al enfoque evolutivo/adaptativo? A. No puede aplicarse a poblaciones. B. Clasifica como ‚Äúanormal‚Äù conductas poco adaptativas sin considerar desigualdades o exclusi√≥n estructural. C. Desconoce la biolog√≠a. D. Carece de utilidad cl√≠nica.",
    "answer": "B. Puede estigmatizar conductas poco adaptativas sin ponderar contextos de desigualdad."
  },
  {
    "question": "El enfoque de diversidad e inclusi√≥n sostiene que la normalidad: A. Es fija para proteger a la mayor√≠a. B. Es la media estad√≠stica. C. Es fluida y honra diferencias, aunque algunos autores piden normas operativas en ciertos contextos. D. Debe limitarse a lo cl√≠nico.",
    "answer": "C. Se enfatiza la fluidez y la aceptaci√≥n de variedad, con la tensi√≥n de requerir normas operativas en contextos particulares."
  },
  {
    "question": "En el enfoque filos√≥fico y √©tico, ¬øqu√© matiz ofrece el texto? A. Lo normal siempre coincide con lo com√∫n. B. Lo normal se vincula con lo moralmente deseable, aunque pueda ser poco com√∫n; su aplicaci√≥n es abstracta y variable. C. Se reduce a cumplir leyes. D. Solo admite criterios utilitaristas.",
    "answer": "B. Lo normal puede asociarse a lo deseable moralmente y no a lo com√∫n; adem√°s es abstracto y variable, dificultando su pr√°ctica."
  },
  {
    "question": "En la perspectiva subjetiva/experiencial/humanista, la anormalidad se sugiere principalmente por: A. El desacuerdo entre expertos. B. La percepci√≥n de distr√©s subjetivo por parte de la persona. C. La desaprobaci√≥n social. D. La presencia de signos f√≠sicos.",
    "answer": "B. Se centra en la percepci√≥n de la persona; la aparici√≥n/interpretaci√≥n de sufrimiento subjetivo sugiere anormalidad."
  },
  {
    "question": "¬øQu√© consecuencia problem√°tica menciona el texto para la perspectiva subjetiva si se lleva al extremo? A. Universaliza la moral. B. Impide medir biol√≥gicamente el malestar. C. Dificulta una definici√≥n colectiva y operativa de normalidad. D. Elimina la historia cultural.",
    "answer": "C. La centralidad exclusiva en lo subjetivo dificulta lograr una definici√≥n colectiva/operativa."
  },
  {
    "question": "En la visi√≥n cl√≠nica/m√©dica/psicol√≥gica/psiqui√°trica, ¬øcu√°l de las siguientes fue una ampliaci√≥n respecto de la mirada org√°nica inicial? A. Cumplimiento de expectativas culturales hegem√≥nicas. B. Adaptabilidad al entorno, salud emocional y funcionamiento social. C. Ajuste a c√≥digos legales. D. Promedio estad√≠stico de rasgos.",
    "answer": "B. Se ampli√≥ hacia adaptabilidad, salud emocional y funcionamiento social, m√°s all√° de la ausencia de enfermedad f√≠sica o mental."
  },
  {
    "question": "¬øCu√°l de las siguientes no es una cr√≠tica a la visi√≥n org√°nica estricta de la normalidad? A. Ignora aspectos sociales, psicol√≥gicos o culturales. B. Supone que la ausencia de s√≠ntomas agota la definici√≥n. C. Var√≠a con la asimilaci√≥n cultural de minor√≠as. D. Requiere complementarse con criterios funcionales.",
    "answer": "C. La variaci√≥n por asimilaci√≥n cultural corresponde al enfoque cultural, no a la cr√≠tica interna de la mirada org√°nica."
  },
  {
    "question": "¬øCu√°l par √©nfasis-rasgo est√° correctamente asociado seg√∫n el texto? A. Estad√≠stico‚Äîmoralmente deseable. B. Social/normativo‚Äîajuste a normas formales e informales en contextos definidos. C. Subjetivo‚Äîmedici√≥n por rangos poblacionales. D. Filos√≥fico‚Äîprevalencia de la media.",
    "answer": "B. El enfoque social/normativo se define por el ajuste a normas formales e informales en contextos sociales espec√≠ficos."
  },
  {
    "question": "¬øQu√© formulaci√≥n integra adecuadamente los tres subcriterios cl√≠nicos ampliados al final del texto? A. Adaptaci√≥n al entorno + ausencia de malestar + bienestar subjetivo. B. Frecuencia estad√≠stica + moral mayoritaria + bienestar subjetivo. C. Normas sociales + ausencia de s√≠ntomas + media poblacional. D. Ideal filos√≥fico + desarrollo evolutivo + dolor f√≠sico.",
    "answer": "A. El texto lista expl√≠citamente adaptaci√≥n, ausencia de malestar psicol√≥gico y bienestar subjetivo como indicadores de normalidad."
  },
  {
    "question": "¬øQu√© afirmaci√≥n global es m√°s fiel al marco del texto? A. La normalidad es atemporal y √∫nica. B. La normalidad depende del lugar y del tiempo, por lo que requiere m√∫ltiples aproximaciones para su definici√≥n. C. Basta con el criterio cl√≠nico para toda decisi√≥n. D. Si algo es com√∫n, siempre es normal.",
    "answer": "B. La normalidad es contextual e hist√≥rica, y requiere diversas perspectivas para definirse."
  },
  {
    "question": "¬øQu√© explica que actitudes, emociones y comportamientos var√≠en seg√∫n el contexto?",
    "answer": "La interacci√≥n entre ambiente, procesos internos y capacidad de adaptaci√≥n."
  },
  {
    "question": "¬øPor qu√© la ‚Äúnormalidad‚Äù se aborda desde varias perspectivas en el texto?",
    "answer": "Porque es un concepto complejo."
  },
  {
    "question": "¬øC√≥mo define la perspectiva estad√≠stica lo ‚Äúnormal‚Äù?",
    "answer": "Lo m√°s frecuente en la poblaci√≥n (dentro del rango de la mayor√≠a)."
  },
  {
    "question": "¬øQu√© limitaci√≥n clave tiene la normalidad estad√≠stica?",
    "answer": "Lo com√∫n no siempre es saludable ni adaptativo."
  },
  {
    "question": "¬øC√≥mo define la perspectiva social o normativa lo ‚Äúnormal‚Äù?",
    "answer": "Conformidad con normas sociales formales e informales."
  },
  {
    "question": "¬øCu√°l es la cr√≠tica central a la visi√≥n social/normativa?",
    "answer": "Es relativista y cambiante seg√∫n el contexto hist√≥rico."
  },
  {
    "question": "Seg√∫n la perspectiva cultural/antropol√≥gica, ¬øqu√© es la normalidad?",
    "answer": "Un concepto cultural que var√≠a entre culturas."
  },
  {
    "question": "¬øC√≥mo define la perspectiva evolutiva/adaptativa lo ‚Äúnormal‚Äù?",
    "answer": "Lo que permite afrontar eficazmente los cambios del entorno."
  },
  {
    "question": "¬øQu√© limitaci√≥n reconoce la visi√≥n evolutiva/adaptativa?",
    "answer": "Puede clasificar como ‚Äúanormal‚Äù conductas condicionadas por desigualdad o exclusi√≥n."
  },
  {
    "question": "En diversidad e inclusi√≥n, ¬øqu√© resalta la noci√≥n de normalidad?",
    "answer": "La diversidad y la aceptaci√≥n amplia de diferencias."
  },
  {
    "question": "¬øQu√© advertencia hacen algunos autores frente a diversidad e inclusi√≥n?",
    "answer": "En ciertos contextos se requieren normas operativas para el bienestar general."
  },
  {
    "question": "¬øC√≥mo vincula la perspectiva filos√≥fica/√©tica la normalidad?",
    "answer": "A lo √©tica o moralmente deseable, no solo a lo com√∫n."
  },
  {
    "question": "En la visi√≥n subjetiva/experiencial/humanista, ¬øqu√© sugiere ‚Äúanormalidad‚Äù?",
    "answer": "La presencia de sufrimiento o distr√©s subjetivo."
  },
  {
    "question": "¬øC√≥mo define la perspectiva cl√≠nica/m√©dica/psicol√≥gica/psiqui√°trica la normalidad b√°sica?",
    "answer": "Par√°metros biol√≥gicos en rangos saludables y ausencia de enfermedad o trastorno mental."
  },
  {
    "question": "Seg√∫n la ampliaci√≥n cl√≠nica moderna, ¬øqu√© dominios tambi√©n definen normalidad?",
    "answer": "Adaptabilidad al entorno, salud emocional y funcionamiento social."
  },
  {
    "question": "Seg√∫n la perspectiva estad√≠stica, ‚Äúnormal‚Äù se define por una distribuci√≥n ______; lo m√°s com√∫n no siempre es lo m√°s ______ ni ______.",
    "answer": "Seg√∫n la perspectiva estad√≠stica, ‚Äúnormal‚Äù se define por una distribuci√≥n [estad√≠stica]; lo m√°s com√∫n no siempre es lo m√°s [saludable] ni [adaptativo]."
  },
  {
    "question": "En la aproximaci√≥n social o normativa, ‚Äúnormal‚Äù es lo que se ajusta a normas ______ e ______, pero este enfoque se critica por ser excesivamente ______ y ______.",
    "answer": "En la aproximaci√≥n social o normativa, ‚Äúnormal‚Äù es lo que se ajusta a normas [formales] e [informales], pero este enfoque se critica por ser excesivamente [relativista] y [subjetivo]."
  },
  {
    "question": "La visi√≥n cultural sostiene que normalidad/anormalidad son conceptos ______ y que la cultura es un concepto ______ y ______ en el tiempo.",
    "answer": "La visi√≥n cultural sostiene que normalidad/anormalidad son conceptos [culturales] y que la cultura es un concepto [fluido] y [cambiante] en el tiempo."
  },
  {
    "question": "En la perspectiva evolutiva o adaptativa, ‚Äúnormal‚Äù es lo que permite ______ eficazmente a los cambios del entorno; su limitaci√≥n aparece en contextos de ______ o ______.",
    "answer": "En la perspectiva evolutiva o adaptativa, ‚Äúnormal‚Äù es lo que permite [afrontar] eficazmente a los cambios del entorno; su limitaci√≥n aparece en contextos de [desigualdades sociales] o [exclusi√≥n estructural]."
  },
  {
    "question": "El enfoque de diversidad e inclusi√≥n concibe la normalidad como ______ y promueve la aceptaci√≥n de una ______ m√°s amplia; algunos autores exigen adherirse a ______ operativas para proteger el bienestar general.",
    "answer": "El enfoque de diversidad e inclusi√≥n concibe la normalidad como [fluida] y promueve la aceptaci√≥n de una [variedad] m√°s amplia; algunos autores exigen adherirse a [normas] operativas para proteger el bienestar general."
  },
  {
    "question": "Desde la perspectiva filos√≥fica y √©tica, lo ‚Äúnormal‚Äù se vincula con lo ______ o ______ deseable, pero su aplicaci√≥n se complica por basarse en ______ normativos a menudo inalcanzables.",
    "answer": "Desde la perspectiva filos√≥fica y √©tica, lo ‚Äúnormal‚Äù se vincula con lo [√©tico] o [moralmente] deseable, pero su aplicaci√≥n se complica por basarse en [ideales] normativos a menudo inalcanzables."
  },
  {
    "question": "La aproximaci√≥n subjetiva/experiencial/humanista centra la normalidad en la ______ de s√≠ mismo; la aparici√≥n de ______ o ______ sugiere ‚Äúanormalidad‚Äù.",
    "answer": "La aproximaci√≥n subjetiva/experiencial/humanista centra la normalidad en la [percepci√≥n] de s√≠ mismo; la aparici√≥n de [sufrimiento] o [distr√©s subjetivo] sugiere ‚Äúanormalidad‚Äù."
  },
  {
    "question": "En la definici√≥n cl√≠nica/m√©dica/psicol√≥gica/psiqui√°trica, la normalidad alude a funciones ______ o ______ dentro de rangos saludables y a la ______ de s√≠ntomas o signos de enfermedad.",
    "answer": "En la definici√≥n cl√≠nica/m√©dica/psicol√≥gica/psiqui√°trica, la normalidad alude a funciones [fisiol√≥gicas] o [anat√≥micas] dentro de rangos saludables y a la [ausencia] de s√≠ntomas o signos de enfermedad."
  },
  {
    "question": "Una cr√≠tica a la visi√≥n org√°nica de la normalidad es que ignora aspectos ______, ______ o ______ que pueden ser relevantes para su definici√≥n.",
    "answer": "Una cr√≠tica a la visi√≥n org√°nica de la normalidad es que ignora aspectos [sociales], [psicol√≥gicos] o [culturales] que pueden ser relevantes para su definici√≥n."
  },
  {
    "question": "La ampliaci√≥n contempor√°nea de la definici√≥n cl√≠nica incluye tres ejes: ______ al entorno, ______ emocional y ______ social.",
    "answer": "La ampliaci√≥n contempor√°nea de la definici√≥n cl√≠nica incluye tres ejes: [adaptabilidad] al entorno, [salud] emocional y [funcionamiento] social."
  },
  {
    "question": "Una mujer practica meditaci√≥n intensiva (3 h/d√≠a), es poco frecuente en su comunidad, no presenta malestar ni deterioro funcional. ¬øQu√© enfoque clasificar√≠a mejor esta conducta como ‚Äúnormal‚Äù? A. Estad√≠stico B. Social/normativo C. Cl√≠nico-psiqui√°trico (salud, ausencia de malestar/deterioro) D. Filos√≥fico/√©tico",
    "answer": "C. Cl√≠nico-psiqui√°trico (prima ausencia de malestar/deterioro)."
  },
  {
    "question": "Ni√±o de 2 a√±os con rabietas y apego intenso; no hay signos de maltrato ni retraso global. ¬øQu√© perspectiva apoya considerarlo normal por etapa del desarrollo? A. Cultural/antropol√≥gica B. Evolutiva/adaptativa C. Subjetiva/humanista D. Estad√≠stica",
    "answer": "B. Evolutiva/adaptativa."
  },
  {
    "question": "Trance ritual comunitario con glosolalia en festividad religiosa, sin disfunci√≥n. ¬øQu√© criterio evita un falso positivo de psicosis? A. Social/normativo B. Cultural/antropol√≥gico C. Subjetivo/humanista D. Estad√≠stico",
    "answer": "B. Cultural/antropol√≥gico."
  },
  {
    "question": "¬øCu√°l es la principal limitaci√≥n del enfoque social/normativo para definir ‚Äúnormalidad‚Äù? A. Ignora el sufrimiento subjetivo B. Es r√≠gido y biol√≥gico C. Es relativista y puede marginar minor√≠as D. Depende de mediciones laboratoriales",
    "answer": "C. Es relativista y puede marginar minor√≠as."
  },
  {
    "question": "Experiencias hipnag√≥gicas aisladas (al inicio del sue√±o), sin deterioro. ¬øCu√°l es la consideraci√≥n m√°s adecuada? A. Anormales por definici√≥n B. Variantes normales si no hay malestar/deterioro C. Requieren antipsic√≥ticos D. Delirios por privaci√≥n sensorial",
    "answer": "B. Variantes normales si no hay malestar/deterioro."
  },
  {
    "question": "En psicopatolog√≠a cl√≠nica, el umbral para definir ‚Äútrastorno mental‚Äù se centra sobre todo en: A. Desviaci√≥n estad√≠stica sin m√°s B. Conflicto con normas morales C. Malestar cl√≠nicamente significativo o deterioro funcional D. Rareza biol√≥gica del rasgo",
    "answer": "C. Malestar cl√≠nicamente significativo o deterioro funcional."
  },
  {
    "question": "Paciente realiza rituales cotidianos durante 3 horas; dice ‚Äúno me molesta‚Äù, pero lleg√≥ tarde y perdi√≥ su empleo. ¬øQu√© criterio pesa m√°s para intervenir? A. Desviaci√≥n estad√≠stica B. Peligro para terceros C. Deterioro funcional D. Inmoralidad del acto",
    "answer": "C. Deterioro funcional."
  },
  {
    "question": "¬øCu√°l ejemplo describe mejor un rasgo egosint√≥nico (vs. egodist√≥nico)? A. Obsesiones intrusas que angustian B. Anorexia con rechazo a la delgadez C. Grandiosidad persistente vivida como parte valiosa del yo D. Fobia social que el paciente desea cambiar",
    "answer": "C. Grandiosidad egosint√≥nica."
  },
  {
    "question": "¬øQu√© enfoque reduce el sobrediagn√≥stico cuando una creencia es ampliamente compartida por una comunidad? A. Estad√≠stico B. Cultural/antropol√≥gico C. Subjetivo/humanista D. Filos√≥fico/√©tico",
    "answer": "B. Cultural/antropol√≥gico."
  },
  {
    "question": "En evaluaci√≥n y examen, ¬øqu√© propiedad asegura que dos cl√≠nicos distintos lleguen a conclusiones similares sobre ‚Äúnormal‚Äù vs ‚Äúanormal‚Äù? A. Validez de constructo B. Fiabilidad interevaluador C. Validez convergente D. Sensibilidad diagn√≥stica",
    "answer": "B. Fiabilidad interevaluador."
  },
  {
    "question": "Paciente adulto competente rechaza transfusi√≥n por motivos religiosos, sin riesgo inmediato para terceros. ¬øQu√© perspectiva respalda mejor respetar su decisi√≥n como ‚Äúnormal‚Äù en t√©rminos √©ticos? A. Estad√≠stica B. Social/normativa C. Filos√≥fica/√©tica (autonom√≠a) D. Subjetiva/humanista",
    "answer": "C. Filos√≥fica/√©tica (autonom√≠a)."
  },
  {
    "question": "Conducta infrecuente pero altamente adaptativa (dormir poco sin d√©ficit, rendimiento √≥ptimo, sin malestar). ¬øQu√© enfoque la considera ‚Äúnormal‚Äù? A. Evolutivo/adaptativo B. Subjetivo/humanista C. Estad√≠stico D. Social/normativo",
    "answer": "A. Evolutivo/adaptativo."
  },
  {
    "question": "Persona LGBTQ+ en comunidad conservadora refiere sufrimiento por rechazo social, pero conserva pleno funcionamiento. ¬øQu√© enfoque ayuda a NO patologizar su identidad? A. Social/normativo B. Diversidad e inclusi√≥n C. Estad√≠stico D. Filos√≥fico/√©tico",
    "answer": "B. Diversidad e inclusi√≥n."
  },
  {
    "question": "En la pr√°ctica cl√≠nica, el esquema de las ‚Äú4 D‚Äù (deviance, distress, dysfunction, danger) es √∫til. ¬øCu√°l ‚ÄúD‚Äù suele ser decisiva para priorizar tratamiento cuando hay recursos limitados? A. Desviaci√≥n B. Malestar leve sin impacto C. Disfunci√≥n marcada D. Rareza de la conducta",
    "answer": "C. Disfunci√≥n marcada."
  },
  {
    "question": "Controlador a√©reo con TDAH leve desea trabajar sin medicaci√≥n; presenta fallos de atenci√≥n ocasionales. ¬øQu√© enfoque enfatiza la necesidad de normas operativas estrictas por seguridad p√∫blica? A. Diversidad e inclusi√≥n (con salvaguardas operativas) B. Subjetivo/humanista C. Cultural/antropol√≥gico D. Estad√≠stico",
    "answer": "A. Diversidad e inclusi√≥n (reconoce l√≠mites por seguridad)."
  }
]
    </script>

    <div class="container">
        <!-- Encabezado -->
        <div class="header" id="header" style="display:none;">
            <div class="progress" id="progress">1 / 10</div>
            <div class="controls">
                <button class="control-btn" id="themeToggle" title="Cambiar tema">üåô</button>
                <button class="control-btn" id="fullscreenBtn" title="Pantalla completa">‚õ∂</button>
                <button class="control-btn" id="endExamBtn" title="Terminar examen">‚úñ</button>
            </div>
        </div>

        <!-- Flashcard -->
        <div class="flashcard-container" id="flashcardContainer" style="display:none;">
            <div class="flashcard" id="flashcard">
                <div class="status-badge" id="statusBadge"></div>
                <div class="flashcard-content" id="flashcardContent">
                    <div id="questionText" class="text-block"></div>
                </div>
                <div class="answer-buttons" id="answerButtons">
                    <button class="answer-btn correct" id="correctBtn">‚úì Correcto</button>
                    <button class="answer-btn incorrect" id="incorrectBtn">‚úó Incorrecto</button>
                </div>
                <div class="card-indicator" id="cardIndicator">PREGUNTA</div>
                <div class="swipe-hint">Desliza ‚Üï para navegar | Toca para voltear</div>
            </div>
        </div>

        <!-- Resultados -->
        <div class="results-screen" id="resultsScreen">
            <h2>Examen Completado</h2>
            <div class="score" id="finalScore">0/500</div>
            <div id="scoreDetails">0 correctas de 0 respondidas</div>
            <button class="restart-btn" id="restartBtn">Nuevo Examen</button>
            <button class="restart-btn" id="reloadBtn">Reiniciar app</button>
        </div>
    </div>

    <script>
        // ======= Estado =======
        let questions = [];      // [{question, answer}]
        let currentIndex = 0;
        let isShowingAnswer = false;
        let answers = {};        // { index: true|false }
        let examStarted = false;

        // Touch
        let startY = 0, startTime = 0;

        // Tema
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const savedTheme = localStorage.getItem('theme') || 'light';
        if(savedTheme==='dark'){ body.setAttribute('data-theme','dark'); themeToggle.textContent='‚òÄÔ∏è'; }
        themeToggle.addEventListener('click', ()=>{
            const isDark = body.getAttribute('data-theme')==='dark';
            if(isDark){ body.removeAttribute('data-theme'); themeToggle.textContent='üåô'; localStorage.setItem('theme','light'); }
            else{ body.setAttribute('data-theme','dark'); themeToggle.textContent='‚òÄÔ∏è'; localStorage.setItem('theme','dark'); }
        });

        // Persistencia
        const LS_KEY_DATA = 'examData_v3'; // nueva versi√≥n para modo embebido

        function computeHash(str){
            let h=0; for(let i=0;i<str.length;i++){ h=(h*31 + str.charCodeAt(i))>>>0; }
            return h.toString(16);
        }

        function saveAll(dataHash){
            const payload = { questions, currentIndex, answers, dataHash };
            localStorage.setItem(LS_KEY_DATA, JSON.stringify(payload));
        }
        function loadAll(){ try{ return JSON.parse(localStorage.getItem(LS_KEY_DATA)); }catch{ return null; } }
        function clearAll(){ localStorage.removeItem(LS_KEY_DATA); }

        // Utilidades
        function escapeHtml(str){
            return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
                              .replace(/"/g,'&quot;').replace(/'/g,'&#039;');
        }
        function formatOptions(text){
            let safe = escapeHtml(text).replace(/\r\n|\r/g,'\n');
            // Inserta saltos antes de A./B./C./D. cuando van separados por espacios
            safe = safe.replace(/(\s|^)(A\.\s)/g,'<br>$2')
                       .replace(/(\s|^)(B\.\s)/g,'<br>$2')
                       .replace(/(\s|^)(C\.\s)/g,'<br>$2')
                       .replace(/(\s|^)(D\.\s)/g,'<br>$2')
                       .replace(/\n/g,'<br>');
            // Evita <br> inicial doble
            safe = safe.replace(/^(<br>)+/,'');
            return safe;
        }
        function shuffleInPlace(arr){
            for(let i=arr.length-1;i>0;i--){
                const j = Math.floor(Math.random()*(i+1));
                [arr[i],arr[j]]=[arr[j],arr[i]];
            }
            return arr;
        }

        // Carga de dataset embebido
        function loadEmbedded(){
            const el = document.getElementById('flashcardData');
            if(!el) return { list:[], hash:'0' };
            const raw = el.textContent || '';
            const hash = computeHash(raw.trim());
            let list=[];
            try{
                const arr = JSON.parse(raw);
                list = (Array.isArray(arr)?arr:[])
                    .filter(o=>o && o.question && o.answer)
                    .map(o=>({ question:String(o.question), answer:String(o.answer) }));
            }catch(e){ console.warn('JSON inv√°lido en #flashcardData'); }
            return { list, hash };
        }

        // Inicio / reanudaci√≥n
        function boot(){
            const { list, hash } = loadEmbedded();
            const saved = loadAll();
            if(saved && saved.dataHash === hash && Array.isArray(saved.questions) && saved.questions.length>0){
                // Retomar exactamente como estaba
                questions = saved.questions;
                answers = saved.answers || {};
                currentIndex = Math.min(Math.max(saved.currentIndex|0,0), questions.length-1);
                startExam(false, hash);
            }else{
                // Nuevo arranque con mezcla
                questions = shuffleInPlace([...list]);
                answers = {};
                currentIndex = 0;
                startExam(true, hash);
            }
        }

        function startExam(fromNewData, dataHash){
            document.getElementById('header').style.display='flex';
            document.getElementById('flashcardContainer').style.display='flex';
            examStarted = true;
            if(fromNewData) saveAll(dataHash);
            showQuestion();
        }

        // Render
        function setStatusBadge(){
            const badge = document.getElementById('statusBadge');
            if(answers.hasOwnProperty(currentIndex)){
                const ok = !!answers[currentIndex];
                badge.textContent = ok ? '‚úì Respondida' : '‚úó Respondida';
                badge.className = 'status-badge ' + (ok ? 'ok' : 'bad');
            }else{
                badge.textContent = '';
                badge.className = 'status-badge';
            }
        }
function showQuestion(){
    // Fuerza modo "PREGUNTA"
    isShowingAnswer = false;

    const q = questions[currentIndex];
    document.getElementById('questionText').innerHTML = `<p>${formatOptions(q.question)}</p>`;
    document.getElementById('progress').textContent = `${currentIndex+1} / ${questions.length}`;
    document.getElementById('cardIndicator').textContent = 'PREGUNTA';

    // Siempre oculta los botones de calificaci√≥n en la cara de pregunta
    document.getElementById('answerButtons').classList.remove('show');

    // Muestra el badge de estado (‚úì o ‚úó si ya fue respondida)
    setStatusBadge();
}

        function showAnswer(){
            const q = questions[currentIndex];
            document.getElementById('questionText').innerHTML = `<p>${formatOptions(q.answer)}</p>`;
            document.getElementById('cardIndicator').textContent = 'RESPUESTA';
            if(!answers.hasOwnProperty(currentIndex)){
                document.getElementById('answerButtons').classList.add('show');
            }else{
                document.getElementById('answerButtons').classList.remove('show');
            }
            isShowingAnswer = true;
            setStatusBadge();
        }

        // Interacciones
        document.getElementById('flashcard').addEventListener('click',(e)=>{
            if(e.target.classList.contains('answer-btn')) return;
            if(isShowingAnswer) showQuestion(); else showAnswer();
        });
        document.getElementById('correctBtn').addEventListener('click', ()=>{
            if(!isShowingAnswer || answers.hasOwnProperty(currentIndex)) return; // Solo en cara respuesta
            answers[currentIndex] = true;
            const { hash } = loadEmbedded(); saveAll(hash);
            nextQuestion();
        });
        document.getElementById('incorrectBtn').addEventListener('click', ()=>{
            if(!isShowingAnswer || answers.hasOwnProperty(currentIndex)) return; // Solo en cara respuesta
            answers[currentIndex] = false;
            const { hash } = loadEmbedded(); saveAll(hash);
            nextQuestion();
        });

        function nextQuestion(){
            if(currentIndex < questions.length-1){
                currentIndex++;
                const { hash } = loadEmbedded(); saveAll(hash);
                showQuestion();
            }else{ showResults(); }
        }
        function previousQuestion(){
            if(currentIndex > 0){
                currentIndex--;
                const { hash } = loadEmbedded(); saveAll(hash);
                showQuestion();
            }
        }

        // Gestos
        document.getElementById('flashcard').addEventListener('touchstart', (e)=>{
            if(isShowingAnswer) return;
            startY = e.touches[0].clientY; startTime = Date.now();
        });
        document.getElementById('flashcard').addEventListener('touchend', (e)=>{
            if(isShowingAnswer) return;
            const endY = e.changedTouches[0].clientY;
            const deltaY = startY - endY, deltaTime = Date.now() - startTime;
            if(Math.abs(deltaY)>50 && deltaTime<300){ if(deltaY>0) nextQuestion(); else previousQuestion(); }
        });

        // Teclado
        document.addEventListener('keydown',(e)=>{
            if(!examStarted) return;
            switch(e.key){
                case ' ':
                case 'Enter':
                    e.preventDefault(); if(isShowingAnswer) showQuestion(); else showAnswer(); break;
                case 'ArrowUp':
                    e.preventDefault(); if(!isShowingAnswer) nextQuestion(); break;
                case 'ArrowDown':
                    e.preventDefault(); if(!isShowingAnswer) previousQuestion(); break;
                case '1':
                    if(isShowingAnswer && !answers.hasOwnProperty(currentIndex)){
                        answers[currentIndex]=true; const { hash }=loadEmbedded(); saveAll(hash); nextQuestion();
                    } break;
                case '2':
                    if(isShowingAnswer && !answers.hasOwnProperty(currentIndex)){
                        answers[currentIndex]=false; const { hash }=loadEmbedded(); saveAll(hash); nextQuestion();
                    } break;
            }
        });

        // Pantalla completa y terminar
        document.getElementById('fullscreenBtn').addEventListener('click',()=>{
            if(document.fullscreenElement) document.exitFullscreen(); else document.documentElement.requestFullscreen();
        });
        document.getElementById('endExamBtn').addEventListener('click',()=>{
            if(confirm('¬øEst√°s seguro de que quieres terminar el examen?')) showResults();
        });

        // Resultados (puntaje s√≥lo con respondidas)
        function showResults(){
            document.getElementById('flashcardContainer').style.display='none';
            document.getElementById('header').style.display='none';
            document.getElementById('resultsScreen').style.display='flex';

            const totalAnswered = Object.keys(answers).length;
            const correctAnswers = Object.values(answers).filter(a=>a).length;
            const score = totalAnswered>0 ? Math.round((correctAnswers/totalAnswered)*500) : 0;

            document.getElementById('finalScore').textContent = `${score}/500`;
            document.getElementById('scoreDetails').textContent =
                `${correctAnswers} correctas de ${totalAnswered} respondidas (sobre ${questions.length} preguntas cargadas)`;

            const { hash } = loadEmbedded(); saveAll(hash);
        }

        document.getElementById('restartBtn').addEventListener('click', ()=>{
            answers = {}; currentIndex = 0; questions = shuffleInPlace([...questions]);
            const { hash } = loadEmbedded(); saveAll(hash);
            document.getElementById('resultsScreen').style.display='none';
            document.getElementById('header').style.display='flex';
            document.getElementById('flashcardContainer').style.display='flex';
            isShowingAnswer=false; showQuestion();
        });
        document.getElementById('reloadBtn').addEventListener('click', ()=>{
            clearAll(); location.reload();
        });

        // Inicio
        document.addEventListener('DOMContentLoaded', boot);
        document.addEventListener('contextmenu', e=>e.preventDefault());
    </script>
</body>
</html>

